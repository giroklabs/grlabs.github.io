<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì§€ì¶œ ë¶„ì„ ê³„ì‚°ê¸° - GIROK labs</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', 'Apple SD Gothic Neo', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .nav-link {
      color: white;
      text-decoration: none;
      margin: 0 10px;
      padding: 8px 16px;
      border-radius: 20px;
      background: rgba(255,255,255,0.2);
      transition: background 0.3s ease;
    }

    .nav-link:hover {
      background: rgba(255,255,255,0.3);
    }

    .calculator-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    .calculator-card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }

    .full-width {
      grid-column: 1 / -1;
    }

    .card-title {
      font-size: 1.4em;
      color: #2563eb;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 600;
    }

    .input-group {
      margin-bottom: 15px;
    }

    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #374151;
    }

    .input-group input, .input-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: #2563eb;
    }

    .expense-category {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    .calculate-btn {
      width: 100%;
      background: linear-gradient(135deg, #2563eb, #3b82f6);
      color: white;
      border: none;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
    }

    .calculate-btn:hover {
      background: linear-gradient(135deg, #1d4ed8, #2563eb);
      transform: translateY(-1px);
    }

    .result {
      margin-top: 20px;
      padding: 20px;
      background: #f0f9ff;
      border-radius: 8px;
      border-left: 4px solid #2563eb;
    }

    .result h3 {
      color: #1e40af;
      margin-bottom: 15px;
    }

    .result-item {
      margin: 8px 0;
      font-size: 1.1em;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .highlight {
      font-weight: 600;
      color: #dc2626;
    }

    .success {
      color: #059669;
    }

    .warning {
      color: #d97706;
    }

    .progress-bar {
      width: 100%;
      height: 20px;
      background: #e5e7eb;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #10b981, #059669);
      transition: width 0.5s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 600;
      font-size: 12px;
    }

    .chart-container {
      height: 300px;
      background: #f8fafc;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
      position: relative;
    }

    .savings-goal {
      background: #fef3c7;
      border: 2px solid #f59e0b;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }

    .savings-goal h4 {
      color: #92400e;
      margin-bottom: 10px;
    }

    @media (max-width: 768px) {
      .calculator-grid {
        grid-template-columns: 1fr;
      }
      
      .expense-category {
        grid-template-columns: 1fr;
      }
      
      .header h1 {
        font-size: 2em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“Š ì§€ì¶œ ë¶„ì„ ê³„ì‚°ê¸°</h1>
      <p>ì›” ì§€ì¶œì„ ë¶„ì„í•˜ê³  FIRE ë‹¬ì„±ì„ ìœ„í•œ ì ˆì•½ ëª©í‘œë¥¼ ì„¤ì •í•˜ì„¸ìš”</p>
      <div style="margin-top: 15px;">
        <a href="index.html" class="nav-link">ğŸ  í™ˆ</a>
        <a href="fire-calculator.html" class="nav-link">ğŸ”¥ FIRE ê³„ì‚°ê¸°</a>
        <a href="asset-allocation.html" class="nav-link">ğŸ“Š ìì‚° ë°°ë¶„</a>
        <a href="gift-tax-calculator.html" class="nav-link">ğŸ’° ì¦ì—¬ì„¸ ê³„ì‚°ê¸°</a>
      </div>
    </div>

    <div class="calculator-grid">
      <!-- ì§€ì¶œ ì…ë ¥ -->
      <div class="calculator-card">
        <div class="card-title">ğŸ’° ì›” ì§€ì¶œ ì…ë ¥</div>
        
        <div class="input-group">
          <label for="monthlyIncome">ì›” ì†Œë“ (ë§Œì›)</label>
          <input type="number" id="monthlyIncome" value="500" min="0">
        </div>

        <div class="expense-category">
          <div class="input-group">
            <label for="housing">ì£¼ê±°ë¹„ (ë§Œì›)</label>
            <input type="number" id="housing" value="120" min="0">
          </div>
          <div class="input-group">
            <label for="food">ì‹ë¹„ (ë§Œì›)</label>
            <input type="number" id="food" value="60" min="0">
          </div>
          <div class="input-group">
            <label for="transportation">êµí†µë¹„ (ë§Œì›)</label>
            <input type="number" id="transportation" value="30" min="0">
          </div>
          <div class="input-group">
            <label for="utilities">ê³µê³¼ê¸ˆ (ë§Œì›)</label>
            <input type="number" id="utilities" value="15" min="0">
          </div>
          <div class="input-group">
            <label for="healthcare">ì˜ë£Œë¹„ (ë§Œì›)</label>
            <input type="number" id="healthcare" value="10" min="0">
          </div>
          <div class="input-group">
            <label for="entertainment">ì—¬ê°€/ì˜¤ë½ (ë§Œì›)</label>
            <input type="number" id="entertainment" value="40" min="0">
          </div>
          <div class="input-group">
            <label for="shopping">ì‡¼í•‘ (ë§Œì›)</label>
            <input type="number" id="shopping" value="35" min="0">
          </div>
          <div class="input-group">
            <label for="others">ê¸°íƒ€ (ë§Œì›)</label>
            <input type="number" id="others" value="20" min="0">
          </div>
        </div>
        
        <button class="calculate-btn" onclick="analyzeExpenses()">ì§€ì¶œ ë¶„ì„í•˜ê¸°</button>
      </div>

      <!-- ì§€ì¶œ ë¶„ì„ ê²°ê³¼ -->
      <div class="calculator-card">
        <div class="card-title">ğŸ“ˆ ì§€ì¶œ ë¶„ì„ ê²°ê³¼</div>
        
        <div id="expenseResult" class="result" style="display: none;">
          <h3>ğŸ’¸ ì›” ì§€ì¶œ í˜„í™©</h3>
          <div id="expenseDetails"></div>
        </div>

        <div id="savingsAnalysis" class="result" style="display: none;">
          <h3>ğŸ’° ì €ì¶• ë¶„ì„</h3>
          <div id="savingsDetails"></div>
        </div>
      </div>

      <!-- ì ˆì•½ ëª©í‘œ ì„¤ì • -->
      <div class="calculator-card full-width">
        <div class="card-title">ğŸ¯ ì ˆì•½ ëª©í‘œ ì„¤ì •</div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
          <div>
            <div class="input-group">
              <label for="savingsGoal">ëª©í‘œ ì €ì¶•ë¥  (%)</label>
              <input type="number" id="savingsGoal" value="30" min="0" max="70">
            </div>
            
            <div class="input-group">
              <label for="targetPeriod">ëª©í‘œ ë‹¬ì„± ê¸°ê°„ (ê°œì›”)</label>
              <input type="number" id="targetPeriod" value="12" min="1" max="60">
            </div>
            
            <button class="calculate-btn" onclick="calculateSavingsGoal()">ì ˆì•½ ëª©í‘œ ê³„ì‚°</button>
          </div>
          
          <div id="goalResult" class="result" style="display: none;">
            <h3>ğŸ† ì ˆì•½ ëª©í‘œ ê²°ê³¼</h3>
            <div id="goalDetails"></div>
          </div>
        </div>

        <div id="recommendationsResult" style="display: none; margin-top: 20px;">
          <h3 style="color: #2563eb; margin-bottom: 15px;">ğŸ’¡ ì ˆì•½ ì¶”ì²œ ì‚¬í•­</h3>
          <div id="recommendationsList"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    function formatNumber(num) {
      return new Intl.NumberFormat('ko-KR').format(Math.round(num));
    }

    function analyzeExpenses() {
      const income = parseFloat(document.getElementById('monthlyIncome').value);
      const housing = parseFloat(document.getElementById('housing').value);
      const food = parseFloat(document.getElementById('food').value);
      const transportation = parseFloat(document.getElementById('transportation').value);
      const utilities = parseFloat(document.getElementById('utilities').value);
      const healthcare = parseFloat(document.getElementById('healthcare').value);
      const entertainment = parseFloat(document.getElementById('entertainment').value);
      const shopping = parseFloat(document.getElementById('shopping').value);
      const others = parseFloat(document.getElementById('others').value);

      const totalExpenses = housing + food + transportation + utilities + healthcare + entertainment + shopping + others;
      const savings = income - totalExpenses;
      const savingsRate = (savings / income) * 100;

      const expenses = [
        { name: 'ì£¼ê±°ë¹„', amount: housing, color: '#3b82f6' },
        { name: 'ì‹ë¹„', amount: food, color: '#10b981' },
        { name: 'êµí†µë¹„', amount: transportation, color: '#f59e0b' },
        { name: 'ê³µê³¼ê¸ˆ', amount: utilities, color: '#8b5cf6' },
        { name: 'ì˜ë£Œë¹„', amount: healthcare, color: '#ef4444' },
        { name: 'ì—¬ê°€/ì˜¤ë½', amount: entertainment, color: '#06b6d4' },
        { name: 'ì‡¼í•‘', amount: shopping, color: '#f97316' },
        { name: 'ê¸°íƒ€', amount: others, color: '#84cc16' }
      ];

      // ì§€ì¶œ ê²°ê³¼ í‘œì‹œ
      const resultDiv = document.getElementById('expenseResult');
      const detailsDiv = document.getElementById('expenseDetails');
      
      let expenseBreakdown = '';
      expenses.forEach(expense => {
        const percentage = (expense.amount / totalExpenses) * 100;
        expenseBreakdown += `
          <div class="result-item">
            <span>${expense.name}</span>
            <span class="highlight">${formatNumber(expense.amount)}ë§Œì› (${percentage.toFixed(1)}%)</span>
          </div>
        `;
      });

      detailsDiv.innerHTML = `
        <div class="result-item">
          <span>ì´ ì›” ì§€ì¶œ</span>
          <span class="highlight">${formatNumber(totalExpenses)}ë§Œì›</span>
        </div>
        ${expenseBreakdown}
      `;

      // ì €ì¶• ë¶„ì„
      const savingsDiv = document.getElementById('savingsAnalysis');
      const savingsDetailsDiv = document.getElementById('savingsDetails');
      
      const savingsStatus = savingsRate >= 30 ? 'success' : savingsRate >= 20 ? 'warning' : 'highlight';
      const savingsMessage = savingsRate >= 30 ? 'í›Œë¥­í•œ ì €ì¶•ë¥ ì…ë‹ˆë‹¤!' : 
                             savingsRate >= 20 ? 'ì–‘í˜¸í•œ ì €ì¶•ë¥ ì´ì§€ë§Œ ë” ê°œì„ í•  ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤.' :
                             'ì €ì¶•ë¥ ì´ ë‚®ìŠµë‹ˆë‹¤. ì§€ì¶œ ì ˆì•½ì´ í•„ìš”í•©ë‹ˆë‹¤.';

      savingsDetailsDiv.innerHTML = `
        <div class="result-item">
          <span>ì›” ì €ì¶•ì•¡</span>
          <span class="${savingsStatus}">${formatNumber(savings)}ë§Œì›</span>
        </div>
        <div class="result-item">
          <span>ì €ì¶•ë¥ </span>
          <span class="${savingsStatus}">${savingsRate.toFixed(1)}%</span>
        </div>
        <div class="savings-goal">
          <h4>${savingsMessage}</h4>
          <p>FIRE ë‹¬ì„±ì„ ìœ„í•œ ê¶Œì¥ ì €ì¶•ë¥ : 25% ì´ìƒ</p>
        </div>
      `;

      resultDiv.style.display = 'block';
      savingsDiv.style.display = 'block';

      // ì ˆì•½ ì¶”ì²œì‚¬í•­ ìƒì„±
      generateRecommendations(expenses, income, totalExpenses);
    }

    function generateRecommendations(expenses, income, totalExpenses) {
      const recommendations = [];
      
      expenses.forEach(expense => {
        const percentage = (expense.amount / totalExpenses) * 100;
        
        if (expense.name === 'ì£¼ê±°ë¹„' && percentage > 30) {
          recommendations.push(`ì£¼ê±°ë¹„ê°€ ì´ ì§€ì¶œì˜ ${percentage.toFixed(1)}%ë¡œ ë†’ìŠµë‹ˆë‹¤. ë” ì €ë ´í•œ ì£¼ê±°ì§€ ê³ ë ¤ ë˜ëŠ” ë£¸ë©”ì´íŠ¸ êµ¬í•˜ê¸°ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.`);
        }
        if (expense.name === 'ì‹ë¹„' && percentage > 20) {
          recommendations.push(`ì‹ë¹„ê°€ ${percentage.toFixed(1)}%ë¡œ ë†’ìŠµë‹ˆë‹¤. ì™¸ì‹ ì¤„ì´ê¸°, ë„ì‹œë½ ì¤€ë¹„í•˜ê¸°ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.`);
        }
        if (expense.name === 'ì—¬ê°€/ì˜¤ë½' && percentage > 15) {
          recommendations.push(`ì—¬ê°€ë¹„ê°€ ${percentage.toFixed(1)}%ë¡œ ë†’ìŠµë‹ˆë‹¤. ë¬´ë£Œ ë˜ëŠ” ì €ë ´í•œ ì—¬ê°€í™œë™ì„ ì°¾ì•„ë³´ì„¸ìš”.`);
        }
        if (expense.name === 'ì‡¼í•‘' && percentage > 10) {
          recommendations.push(`ì‡¼í•‘ë¹„ê°€ ${percentage.toFixed(1)}%ë¡œ ë†’ìŠµë‹ˆë‹¤. í•„ìˆ˜í’ˆ ìœ„ì£¼ë¡œ êµ¬ë§¤í•˜ê³  í• ì¸ ì‹œê¸°ë¥¼ í™œìš©í•˜ì„¸ìš”.`);
        }
        if (expense.name === 'êµí†µë¹„' && percentage > 10) {
          recommendations.push(`êµí†µë¹„ê°€ ${percentage.toFixed(1)}%ë¡œ ë†’ìŠµë‹ˆë‹¤. ëŒ€ì¤‘êµí†µ ì´ìš©ì´ë‚˜ ì¹´í’€ì„ ê³ ë ¤í•´ë³´ì„¸ìš”.`);
        }
      });

      // ì¼ë°˜ì ì¸ ì ˆì•½ íŒ ì¶”ê°€
      recommendations.push('êµ¬ë… ì„œë¹„ìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë§Œ ìœ ì§€í•˜ì„¸ìš”.');
      recommendations.push('ì—ë„ˆì§€ íš¨ìœ¨ì ì¸ ê°€ì „ì œí’ˆ ì‚¬ìš©ìœ¼ë¡œ ê³µê³¼ê¸ˆì„ ì ˆì•½í•˜ì„¸ìš”.');
      recommendations.push('ì¿ í°, í• ì¸ í˜œíƒì„ ì ê·¹ í™œìš©í•˜ì„¸ìš”.');
      recommendations.push('ì¤‘ê³  ê±°ë˜ë¥¼ í†µí•´ í•„ìš”í•œ ë¬¼ê±´ì„ ì €ë ´í•˜ê²Œ êµ¬ë§¤í•˜ì„¸ìš”.');

      const recommendationsDiv = document.getElementById('recommendationsResult');
      const recommendationsListDiv = document.getElementById('recommendationsList');
      
      let recommendationHTML = '';
      recommendations.slice(0, 6).forEach((rec, index) => {
        recommendationHTML += `
          <div style="background: #f0f9ff; padding: 12px; margin: 8px 0; border-radius: 6px; border-left: 4px solid #2563eb;">
            ${index + 1}. ${rec}
          </div>
        `;
      });
      
      recommendationsListDiv.innerHTML = recommendationHTML;
      recommendationsDiv.style.display = 'block';
    }

    function calculateSavingsGoal() {
      const income = parseFloat(document.getElementById('monthlyIncome').value);
      const savingsGoal = parseFloat(document.getElementById('savingsGoal').value) / 100;
      const targetPeriod = parseInt(document.getElementById('targetPeriod').value);

      const currentExpenses = parseFloat(document.getElementById('housing').value) +
                             parseFloat(document.getElementById('food').value) +
                             parseFloat(document.getElementById('transportation').value) +
                             parseFloat(document.getElementById('utilities').value) +
                             parseFloat(document.getElementById('healthcare').value) +
                             parseFloat(document.getElementById('entertainment').value) +
                             parseFloat(document.getElementById('shopping').value) +
                             parseFloat(document.getElementById('others').value);

      const currentSavings = income - currentExpenses;
      const currentSavingsRate = (currentSavings / income) * 100;
      
      const targetSavings = income * savingsGoal;
      const targetExpenses = income - targetSavings;
      const requiredCut = currentExpenses - targetExpenses;
      const monthlyCutNeeded = requiredCut / targetPeriod;

      const goalDiv = document.getElementById('goalResult');
      const goalDetailsDiv = document.getElementById('goalDetails');
      
      if (requiredCut <= 0) {
        goalDetailsDiv.innerHTML = `
          <div class="result-item">
            <span>í˜„ì¬ ì €ì¶•ë¥ </span>
            <span class="success">${currentSavingsRate.toFixed(1)}%</span>
          </div>
          <div class="result-item">
            <span>ëª©í‘œ ë‹¬ì„± ìƒíƒœ</span>
            <span class="success">ì´ë¯¸ ëª©í‘œë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤! ğŸ‰</span>
          </div>
          <div class="result-item">
            <span>ì¶”ê°€ ì €ì¶• ì—¬ë ¥</span>
            <span class="success">${formatNumber(Math.abs(requiredCut))}ë§Œì›</span>
          </div>
        `;
      } else {
        goalDetailsDiv.innerHTML = `
          <div class="result-item">
            <span>í˜„ì¬ ì €ì¶•ë¥ </span>
            <span class="warning">${currentSavingsRate.toFixed(1)}%</span>
          </div>
          <div class="result-item">
            <span>ëª©í‘œ ì €ì¶•ë¥ </span>
            <span class="highlight">${(savingsGoal * 100).toFixed(1)}%</span>
          </div>
          <div class="result-item">
            <span>ì´ ì ˆì•½ í•„ìš” ê¸ˆì•¡</span>
            <span class="highlight">${formatNumber(requiredCut)}ë§Œì›</span>
          </div>
          <div class="result-item">
            <span>ì›” ì ˆì•½ ëª©í‘œ</span>
            <span class="highlight">${formatNumber(monthlyCutNeeded)}ë§Œì›</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" style="width: ${Math.min((currentSavingsRate / (savingsGoal * 100)) * 100, 100)}%">
              ${Math.min(Math.round((currentSavingsRate / (savingsGoal * 100)) * 100), 100)}%
            </div>
          </div>
        `;
      }

      goalDiv.style.display = 'block';

      // FIRE ë‹¬ì„± ì‹œë®¬ë ˆì´ì…˜
      if (targetSavings > 0) {
        const fireYears = calculateFIRETime(targetSavings, targetExpenses * 12);
        goalDetailsDiv.innerHTML += `
          <div class="savings-goal">
            <h4>ğŸ”¥ FIRE ë‹¬ì„± ì˜ˆìƒ</h4>
            <p>ëª©í‘œ ì €ì¶•ë¥  ë‹¬ì„± ì‹œ FIREê¹Œì§€: <strong>${fireYears}ë…„</strong></p>
            <p>ì—°ê°„ í•„ìš” ìì‚°: <strong>${formatNumber(targetExpenses * 12 * 25)}ë§Œì›</strong> (25ë°° ê¸°ì¤€)</p>
          </div>
        `;
      }
    }

    function calculateFIRETime(monthlySavings, annualExpenses) {
      const targetAssets = annualExpenses * 25; // 25ë°° ë£°
      const annualReturn = 0.07; // 7% ê°€ì •
      
      let assets = 0;
      let years = 0;
      const monthlyReturn = annualReturn / 12;
      
      while (assets < targetAssets && years < 50) {
        assets = assets * (1 + monthlyReturn) + monthlySavings;
        years += 1/12;
      }
      
      return Math.ceil(years);
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ ê³„ì‚° ì‹¤í–‰
    window.onload = function() {
      analyzeExpenses();
      calculateSavingsGoal();
    };
  </script>
</body>
</html>