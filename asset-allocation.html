<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ìì‚° ë°°ë¶„ ê³„ì‚°ê¸° - GIROK labs</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', 'Apple SD Gothic Neo', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .nav-link {
      color: white;
      text-decoration: none;
      margin: 0 10px;
      padding: 8px 16px;
      border-radius: 20px;
      background: rgba(255,255,255,0.2);
      transition: background 0.3s ease;
    }

    .nav-link:hover {
      background: rgba(255,255,255,0.3);
    }

    .calculator-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    .calculator-card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }

    .card-title {
      font-size: 1.4em;
      color: #2563eb;
      margin-bottom: 20px;
      text-align: center;
      font-weight: 600;
    }

    .input-group {
      margin-bottom: 15px;
    }

    .input-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #374151;
    }

    .input-group input, .input-group select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s ease;
    }

    .input-group input:focus, .input-group select:focus {
      outline: none;
      border-color: #2563eb;
    }

    .allocation-slider {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .allocation-slider input[type="range"] {
      flex: 1;
      height: 6px;
      border-radius: 3px;
      background: #e5e7eb;
      outline: none;
      -webkit-appearance: none;
    }

    .allocation-slider input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #2563eb;
      cursor: pointer;
    }

    .allocation-value {
      min-width: 50px;
      font-weight: 600;
      color: #2563eb;
    }

    .calculate-btn {
      width: 100%;
      background: linear-gradient(135deg, #2563eb, #3b82f6);
      color: white;
      border: none;
      padding: 14px 20px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
    }

    .calculate-btn:hover {
      background: linear-gradient(135deg, #1d4ed8, #2563eb);
      transform: translateY(-1px);
    }

    .result {
      margin-top: 20px;
      padding: 20px;
      background: #f0f9ff;
      border-radius: 8px;
      border-left: 4px solid #2563eb;
    }

    .result h3 {
      color: #1e40af;
      margin-bottom: 15px;
    }

    .result-item {
      margin: 8px 0;
      font-size: 1.1em;
    }

    .highlight {
      font-weight: 600;
      color: #dc2626;
    }

    .success {
      color: #059669;
    }

    .chart-container {
      height: 300px;
      background: #f8fafc;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 20px;
      position: relative;
    }

    .pie-chart {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      position: relative;
      margin: 0 auto;
    }

    .age-recommendation {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      margin-top: 20px;
    }

    .age-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .age-card {
      background: #f8fafc;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      border-left: 4px solid #2563eb;
    }

    .age-card h4 {
      color: #2563eb;
      margin-bottom: 10px;
    }

    @media (max-width: 768px) {
      .calculator-container {
        grid-template-columns: 1fr;
      }
      
      .header h1 {
        font-size: 2em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ“Š ìì‚° ë°°ë¶„ ê³„ì‚°ê¸°</h1>
      <p>ë‚˜ì´ì™€ ìœ„í—˜ì„±í–¥ì— ë§ëŠ” ìµœì ì˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì„¤ê³„í•˜ì„¸ìš”</p>
      <div style="margin-top: 15px;">
        <a href="index.html" class="nav-link">ğŸ  í™ˆ</a>
        <a href="fire-calculator.html" class="nav-link">ğŸ”¥ FIRE ê³„ì‚°ê¸°</a>
        <a href="expense-tracker.html" class="nav-link">ğŸ’¸ ì§€ì¶œ ë¶„ì„</a>
        <a href="gift-tax-calculator.html" class="nav-link">ğŸ’° ì¦ì—¬ì„¸ ê³„ì‚°ê¸°</a>
      </div>
    </div>

    <div class="calculator-container">
      <!-- ìì‚° ë°°ë¶„ ì…ë ¥ -->
      <div class="calculator-card">
        <div class="card-title">ğŸ’¼ ìì‚° ë°°ë¶„ ì„¤ì •</div>
        
        <div class="input-group">
          <label for="totalAssets">ì´ íˆ¬ì ìì‚° (ë§Œì›)</label>
          <input type="number" id="totalAssets" value="5000" min="0">
        </div>
        
        <div class="input-group">
          <label for="investorAge">íˆ¬ìì ë‚˜ì´</label>
          <input type="number" id="investorAge" value="35" min="20" max="80">
        </div>
        
        <div class="input-group">
          <label for="riskTolerance">ìœ„í—˜ ì„±í–¥</label>
          <select id="riskTolerance">
            <option value="conservative">ë³´ìˆ˜ì  (ì•ˆì •ì„± ì¤‘ì‹œ)</option>
            <option value="moderate" selected>ì¤‘ë„ì  (ê· í˜• ì¶”êµ¬)</option>
            <option value="aggressive">ì ê·¹ì  (ìˆ˜ìµì„± ì¤‘ì‹œ)</option>
          </select>
        </div>

        <div class="input-group">
          <label>ìì‚° ë°°ë¶„ ë¹„ìœ¨ ì¡°ì •</label>
          
          <div class="allocation-slider">
            <label style="min-width: 60px;">ì£¼ì‹</label>
            <input type="range" id="stockRatio" min="0" max="100" value="60" oninput="updateAllocation()">
            <span class="allocation-value" id="stockValue">60%</span>
          </div>
          
          <div class="allocation-slider">
            <label style="min-width: 60px;">ì±„ê¶Œ</label>
            <input type="range" id="bondRatio" min="0" max="100" value="30" oninput="updateAllocation()">
            <span class="allocation-value" id="bondValue">30%</span>
          </div>
          
          <div class="allocation-slider">
            <label style="min-width: 60px;">í˜„ê¸ˆ</label>
            <input type="range" id="cashRatio" min="0" max="100" value="10" oninput="updateAllocation()">
            <span class="allocation-value" id="cashValue">10%</span>
          </div>
        </div>

        <button class="calculate-btn" onclick="calculateAllocation()">ìì‚° ë°°ë¶„ ê³„ì‚°</button>
        <button class="calculate-btn" onclick="getRecommendation()" style="background: linear-gradient(135deg, #059669, #10b981); margin-top: 10px;">ë‚˜ì´ë³„ ì¶”ì²œ ë°°ë¶„</button>
      </div>

      <!-- ê²°ê³¼ í‘œì‹œ -->
      <div class="calculator-card">
        <div class="card-title">ğŸ“ˆ ë°°ë¶„ ê²°ê³¼</div>
        
        <div id="allocationResult" class="result" style="display: none;">
          <h3>ğŸ’° ìì‚° ë°°ë¶„ ê²°ê³¼</h3>
          <div id="allocationDetails"></div>
          <div class="chart-container">
            <canvas id="pieChart" width="250" height="250"></canvas>
          </div>
        </div>

        <div id="projectionResult" class="result" style="display: none; margin-top: 20px;">
          <h3>ğŸ“Š 10ë…„ í›„ ì˜ˆìƒ ìì‚°</h3>
          <div id="projectionDetails"></div>
        </div>
      </div>
    </div>

    <!-- ë‚˜ì´ë³„ ì¶”ì²œ ë°°ë¶„ -->
    <div class="age-recommendation">
      <h2 style="text-align: center; color: #2563eb; margin-bottom: 20px;">ğŸ‘¥ ë‚˜ì´ë³„ ì¶”ì²œ ìì‚° ë°°ë¶„</h2>
      <div class="age-grid">
        <div class="age-card">
          <h4>20-30ëŒ€</h4>
          <p>ì£¼ì‹ 70-80%<br>ì±„ê¶Œ 15-25%<br>í˜„ê¸ˆ 5-10%</p>
          <small>ì¥ê¸° ì„±ì¥ ì¤‘ì‹¬</small>
        </div>
        <div class="age-card">
          <h4>40ëŒ€</h4>
          <p>ì£¼ì‹ 60-70%<br>ì±„ê¶Œ 25-35%<br>í˜„ê¸ˆ 5-10%</p>
          <small>ì„±ì¥ê³¼ ì•ˆì •ì˜ ê· í˜•</small>
        </div>
        <div class="age-card">
          <h4>50ëŒ€</h4>
          <p>ì£¼ì‹ 40-60%<br>ì±„ê¶Œ 35-50%<br>í˜„ê¸ˆ 5-15%</p>
          <small>ì•ˆì •ì„± ë¹„ì¤‘ ì¦ê°€</small>
        </div>
        <div class="age-card">
          <h4>60ëŒ€ ì´ìƒ</h4>
          <p>ì£¼ì‹ 20-40%<br>ì±„ê¶Œ 50-70%<br>í˜„ê¸ˆ 10-20%</p>
          <small>ì›ê¸ˆ ë³´ì¡´ ì¤‘ì‹¬</small>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ìˆ«ì í¬ë§·íŒ… í•¨ìˆ˜
    function formatNumber(num) {
      return new Intl.NumberFormat('ko-KR').format(Math.round(num));
    }

    // ìì‚° ë°°ë¶„ ë¹„ìœ¨ ì—…ë°ì´íŠ¸
    function updateAllocation() {
      const stock = parseInt(document.getElementById('stockRatio').value);
      const bond = parseInt(document.getElementById('bondRatio').value);
      const cash = parseInt(document.getElementById('cashRatio').value);
      
      const total = stock + bond + cash;
      
      if (total !== 100) {
        // ìë™ìœ¼ë¡œ ë¹„ìœ¨ ì¡°ì •
        const remaining = 100 - stock - bond;
        if (remaining >= 0 && remaining <= 100) {
          document.getElementById('cashRatio').value = remaining;
          document.getElementById('cashValue').textContent = remaining + '%';
        }
      }
      
      document.getElementById('stockValue').textContent = stock + '%';
      document.getElementById('bondValue').textContent = bond + '%';
      document.getElementById('cashValue').textContent = document.getElementById('cashRatio').value + '%';
    }

    // ë‚˜ì´ë³„ ì¶”ì²œ ë°°ë¶„ ì ìš©
    function getRecommendation() {
      const age = parseInt(document.getElementById('investorAge').value);
      const riskTolerance = document.getElementById('riskTolerance').value;
      
      let stockRatio, bondRatio, cashRatio;
      
      if (age <= 30) {
        stockRatio = riskTolerance === 'conservative' ? 60 : riskTolerance === 'moderate' ? 70 : 80;
        bondRatio = riskTolerance === 'conservative' ? 30 : riskTolerance === 'moderate' ? 25 : 15;
        cashRatio = riskTolerance === 'conservative' ? 10 : 5;
      } else if (age <= 40) {
        stockRatio = riskTolerance === 'conservative' ? 50 : riskTolerance === 'moderate' ? 65 : 75;
        bondRatio = riskTolerance === 'conservative' ? 40 : riskTolerance === 'moderate' ? 30 : 20;
        cashRatio = riskTolerance === 'conservative' ? 10 : 5;
      } else if (age <= 50) {
        stockRatio = riskTolerance === 'conservative' ? 40 : riskTolerance === 'moderate' ? 55 : 65;
        bondRatio = riskTolerance === 'conservative' ? 50 : riskTolerance === 'moderate' ? 35 : 25;
        cashRatio = riskTolerance === 'conservative' ? 10 : riskTolerance === 'moderate' ? 10 : 10;
      } else {
        stockRatio = riskTolerance === 'conservative' ? 25 : riskTolerance === 'moderate' ? 35 : 45;
        bondRatio = riskTolerance === 'conservative' ? 65 : riskTolerance === 'moderate' ? 55 : 45;
        cashRatio = riskTolerance === 'conservative' ? 10 : riskTolerance === 'moderate' ? 10 : 10;
      }
      
      document.getElementById('stockRatio').value = stockRatio;
      document.getElementById('bondRatio').value = bondRatio;
      document.getElementById('cashRatio').value = cashRatio;
      
      updateAllocation();
      calculateAllocation();
    }

    // ìì‚° ë°°ë¶„ ê³„ì‚°
    function calculateAllocation() {
      const totalAssets = parseFloat(document.getElementById('totalAssets').value) * 10000;
      const stockRatio = parseInt(document.getElementById('stockRatio').value) / 100;
      const bondRatio = parseInt(document.getElementById('bondRatio').value) / 100;
      const cashRatio = parseInt(document.getElementById('cashRatio').value) / 100;
      
      const stockAmount = totalAssets * stockRatio;
      const bondAmount = totalAssets * bondRatio;
      const cashAmount = totalAssets * cashRatio;
      
      // ì˜ˆìƒ ìˆ˜ìµë¥  (ì—­ì‚¬ì  í‰ê·  ê¸°ì¤€)
      const stockReturn = 0.08; // 8%
      const bondReturn = 0.04; // 4%
      const cashReturn = 0.02; // 2%
      
      const portfolioReturn = (stockRatio * stockReturn + bondRatio * bondReturn + cashRatio * cashReturn) * 100;
      const portfolioRisk = Math.sqrt(Math.pow(stockRatio * 0.16, 2) + Math.pow(bondRatio * 0.05, 2)) * 100; // ë‹¨ìˆœí™”ëœ ìœ„í—˜ë„
      
      // 10ë…„ í›„ ì˜ˆìƒ ìì‚°
      const projectedAssets = totalAssets * Math.pow(1 + portfolioReturn/100, 10);
      
      const resultDiv = document.getElementById('allocationResult');
      const detailsDiv = document.getElementById('allocationDetails');
      
      detailsDiv.innerHTML = `
        <div class="result-item">ì£¼ì‹ íˆ¬ìì•¡: <span class="success">${formatNumber(stockAmount/10000)}ë§Œì›</span> (${(stockRatio*100).toFixed(0)}%)</div>
        <div class="result-item">ì±„ê¶Œ íˆ¬ìì•¡: <span class="success">${formatNumber(bondAmount/10000)}ë§Œì›</span> (${(bondRatio*100).toFixed(0)}%)</div>
        <div class="result-item">í˜„ê¸ˆ ë³´ìœ ì•¡: <span class="success">${formatNumber(cashAmount/10000)}ë§Œì›</span> (${(cashRatio*100).toFixed(0)}%)</div>
        <div class="result-item">í¬íŠ¸í´ë¦¬ì˜¤ ì˜ˆìƒ ìˆ˜ìµë¥ : <span class="highlight">${portfolioReturn.toFixed(1)}%</span></div>
        <div class="result-item">í¬íŠ¸í´ë¦¬ì˜¤ ìœ„í—˜ë„: <span class="highlight">${portfolioRisk.toFixed(1)}%</span></div>
      `;
      
      // 10ë…„ í›„ ì˜ˆìƒ ê²°ê³¼
      const projectionDiv = document.getElementById('projectionResult');
      const projectionDetailsDiv = document.getElementById('projectionDetails');
      
      projectionDetailsDiv.innerHTML = `
        <div class="result-item">í˜„ì¬ ìì‚°: <span class="highlight">${formatNumber(totalAssets/10000)}ë§Œì›</span></div>
        <div class="result-item">10ë…„ í›„ ì˜ˆìƒ ìì‚°: <span class="success">${formatNumber(projectedAssets/10000)}ë§Œì›</span></div>
        <div class="result-item">ì˜ˆìƒ ìˆ˜ìµ: <span class="success">${formatNumber((projectedAssets-totalAssets)/10000)}ë§Œì›</span></div>
        <div class="result-item">ì´ ìˆ˜ìµë¥ : <span class="success">${(((projectedAssets/totalAssets)-1)*100).toFixed(1)}%</span></div>
      `;
      
      resultDiv.style.display = 'block';
      projectionDiv.style.display = 'block';
      
      drawPieChart(stockRatio, bondRatio, cashRatio);
    }

    // íŒŒì´ ì°¨íŠ¸ ê·¸ë¦¬ê¸°
    function drawPieChart(stockRatio, bondRatio, cashRatio) {
      const canvas = document.getElementById('pieChart');
      const ctx = canvas.getContext('2d');
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const radius = 100;
      
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      
      const data = [
        { label: 'ì£¼ì‹', value: stockRatio, color: '#3b82f6' },
        { label: 'ì±„ê¶Œ', value: bondRatio, color: '#10b981' },
        { label: 'í˜„ê¸ˆ', value: cashRatio, color: '#f59e0b' }
      ];
      
      let currentAngle = -Math.PI / 2; // 12ì‹œ ë°©í–¥ë¶€í„° ì‹œì‘
      
      data.forEach((item, index) => {
        if (item.value > 0) {
          const sliceAngle = (item.value * 2 * Math.PI);
          
          // íŒŒì´ ìŠ¬ë¼ì´ìŠ¤ ê·¸ë¦¬ê¸°
          ctx.beginPath();
          ctx.moveTo(centerX, centerY);
          ctx.arc(centerX, centerY, radius, currentAngle, currentAngle + sliceAngle);
          ctx.closePath();
          ctx.fillStyle = item.color;
          ctx.fill();
          
          // ë¼ë²¨ ê·¸ë¦¬ê¸°
          const labelAngle = currentAngle + sliceAngle / 2;
          const labelX = centerX + Math.cos(labelAngle) * (radius * 0.7);
          const labelY = centerY + Math.sin(labelAngle) * (radius * 0.7);
          
          ctx.fillStyle = 'white';
          ctx.font = 'bold 14px Arial';
          ctx.textAlign = 'center';
          ctx.fillText(`${item.label}`, labelX, labelY - 5);
          ctx.fillText(`${(item.value * 100).toFixed(0)}%`, labelX, labelY + 10);
          
          currentAngle += sliceAngle;
        }
      });
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ê¸°ë³¸ ê³„ì‚° ì‹¤í–‰
    window.onload = function() {
      updateAllocation();
      getRecommendation();
    };
  </script>
</body>
</html>